YC-CLOUD - Управление
===============================

Настройка ролей в облаке:

    1. Настройка прав организации.
	Пользователь не имеет прав на организацию - в настройках организации роли пользователя не указываются
    2. Настройка прав облака:
	- quota-manager.viewer (позволяет просматривать квоты облака)
		- Роль quota-manager.viewer позволяет просматривать информацию о квотах сервисов Yandex Cloud и о запросах на увеличение таких квот, а также об облаках.
	- resource-manager.auditor (позволяет видеть общую информацию об облаке)
		- Роль resource-manager.auditor позволяет просматривать метаинформацию облаков и каталогов, а также информацию о назначенных правах доступа к облакам и каталогам.
			Пользователи с этой ролью могут:
				- просматривать информацию об облаках и их настройках, а также о назначенных правах доступа к облакам;
				- просматривать информацию о каталогах и их настройках, а также о назначенных правах доступа к каталогам;
				- просматривать информацию о квотах сервиса Resource Manager.
	- vpc.user
		- Роль vpc.user позволяет использовать облачные сети, подсети, таблицы маршрутизации, шлюзы, группы безопасности и IP-адреса, получать информацию об этих ресурсах, а также о квотах и операциях с ресурсами сервиса.
			Пользователи с этой ролью могут:
				- просматривать список облачных сетей и информацию о них, а также использовать облачные сети;
				- просматривать список подсетей и информацию о них, а также использовать подсети;
				- просматривать список адресов облачных ресурсов и информацию о них, а также использовать такие адреса;
				- просматривать список таблиц маршрутизации и информацию о них, а также использовать таблицы маршрутизации;
				- просматривать список групп безопасности и информацию о них, а также использовать группы безопасности;
				- просматривать информацию о NAT-шлюзах и подключать их к таблицам маршрутизации;
				- просматривать информацию об использованных IP-адресах в подсетях;
				- просматривать информацию о квотах сервиса Virtual Private Cloud;
				- просматривать информацию об операциях с ресурсами сервиса Virtual Private Cloud;
				- просматривать информацию об операциях с ресурсами сервиса Compute Cloud;
				- просматривать информацию об облаке;
				- просматривать информацию о каталоге.
    3. Настройка прав в каталоге:
	- compute.editor (дает доступ для управления вм (удаление\создание и тд))
		- Роль compute.editor позволяет управлять виртуальными машинами, группами виртуальных машин, дисками, образами, кластерами GPU и другими ресурсами сервиса Compute Cloud.
			Пользователи с этой ролью могут:
				- создавать, изменять, запускать, перезапускать, останавливать, переносить и удалять виртуальные машины;
				- просматривать список виртуальных машин, информацию о них и о назначенных правах доступа к ним;
				- подключать к виртуальным машинам и отключать от них диски, файловые хранилища и сетевые интерфейсы, привязывать группы безопасности к сетевым интерфейсам виртуальных машин;
				- создавать виртуальные машины с пользовательскими FQDN, создавать мультиинтерфейсные виртуальные машины;
				- привязывать сервисные аккаунты к виртуальным машинам, активировать на виртуальных машинах токен AWS v1;
				- использовать последовательный порт виртуальной машины в режиме чтения и записи;
				- имитировать события обслуживания виртуальной машины;
				- просматривать метаданные виртуальной машины;
				- просматривать информацию о статусе настройки доступа по OS Login на виртуальных машинах и подключаться к виртуальным машинам через OS Login с помощью SSH-сертификатов или SSH-ключей;
				- просматривать список групп виртуальных машин, информацию о них и о назначенных правах доступа к ним, а также использовать, создавать, изменять, запускать, останавливать и удалять группы виртуальных машин;
				- просматривать список групп размещения виртуальных машин, информацию о них и о назначенных правах доступа к ним, а также использовать, создавать, изменять и удалять группы размещения виртуальных машин;
				- просматривать списки ВМ, входящих в группы размещения;
				- просматривать список групп выделенных хостов, информацию о них и о назначенных правах доступа к ним, а также использовать, создавать, изменять и удалять группы выделенных хостов;
				- просматривать списки хостов и виртуальных машин, входящих в группы выделенных хостов;
				- изменять запланированное время обслуживания хостов, входящих в группы выделенных хостов;
				- использовать кластеры GPU, а также создавать, изменять и удалять их;
				- просматривать информацию о кластерах GPU и виртуальных машинах, входящих в кластеры GPU, а также о назначенных правах доступа к таким кластерам;
				- просматривать список дисков, информацию о них и о назначенных правах доступа к ним, а также использовать, создавать, изменять, переносить и удалять диски;
				- создавать зашифрованные диски;
				- просматривать и обновлять ссылки на диски;
				- просматривать список файловых хранилищ, информацию о них и о назначенных правах доступа к ним, а также использовать файловые хранилища и создавать, изменять и удалять их;
				- просматривать список групп размещения нереплицируемых дисков, информацию о них и о назначенных правах доступа к ним, а также использовать, создавать, изменять и удалять группы размещения нереплицируемых дисков;
				- просматривать списки дисков, входящих в группы размещения;
				- просматривать список образов, информацию о них и о назначенных правах доступа к ним, а также использовать, создавать, изменять и удалять образы;
				- создавать, изменять и удалять семейства образов, обновлять образы в них;
				- просматривать информацию о семействах образов, о входящих в семейства образах, о наиболее актуальном образе в семействе, а также о назначенных правах доступа к семействам образов;
				- просматривать список снимков дисков, информацию о них и о назначенных правах доступа к ним, а также использовать, создавать, изменять и удалять снимки дисков;
				- просматривать информацию о расписаниях создания снимков дисков и о назначенных правах доступа к расписаниям, а также создавать, изменять и удалять их;
				- просматривать информацию об облачных сетях и использовать их;
				- просматривать информацию о подсетях и использовать их;
				- просматривать информацию об адресах облачных ресурсов и использовать их;
				- просматривать информацию о таблицах маршрутизации и использовать их;
				- просматривать информацию о группах безопасности и использовать их;
				- просматривать информацию о NAT-шлюзах и подключать их к таблицам маршрутизации;
				- просматривать информацию об использованных IP-адресах в подсетях;
				- просматривать информацию об операциях с ресурсами сервиса Virtual Private Cloud;
				- просматривать информацию о квотах сервиса Virtual Private Cloud;
				- просматривать в консоли управления информацию об объеме потребления ресурсов и квот Compute Cloud, о лимитах дисков;
				- просматривать списки операций с ресурсами сервиса Compute Cloud и информацию об операциях, а также отменять выполнение этих операций;
				- просматривать информацию о доступных платформах и использовать их;
				- просматривать список зон доступности, информацию о них и о назначенных правах доступа к ним;
				- просматривать информацию об облаке;
				- просматривать информацию о каталоге.

=============================================
S3 Amazon
storage.yandexcloud.net
id YCAJE6qE_iTsVbbqSq9qLAuD1
secret YCPoTBu4RLd02yCT7GR8mx5RRNmg4szL4lgD5LBI

Секреты
func.secret
y0_AgAAAAAJvn5aAATuwQAAAAEDOibmAADrfe2bhFVLxKx-HXkEwgk47rZ9sA

yc comands:
=============================================
папки и их id
b1g26iejv4ajlplp2bq6 | net1-default
b1gnnt2d3fta6u4372tc | net2-vrm-backoffice
b1gccb6as7ma9svmu4i1 | net3-vrm-dev
b1gt4cu2q8hsbrd015ar | net4-vrm-subdev
b1gkas9ivn5bcoubbj49 | net5-poligons-dev
=============================================
Перенос вм в другую папку:

Полезные ссылки: https://yandex.cloud/ru/docs/compute/operations/vm-control/vm-change-folder

Инструкция:
1. Вывести список папок и выбрать из какой и куда переносить:
	yc resource-manager folder list
2. Вывести список вм:
	yc compute instance list (необязательно --folder-name (имя папки) или --folder-id (id папки))
3. Перенести вм в нужную папку:
	yc compute instance move <vm-id> --destination-folder-id <folder-id>

=============================================
Перенос диска в другую папку:

Полезные ссылки: https://yandex.cloud/ru/docs/compute/operations/disk-control/disk-change-folder

Инструкция:
1. Вывести список папок и выбрать из какой и куда переносить:
	yc resource-manager folder list
2. Вывести список дисков:
	yc compute disk list (необязательно --folder-name (имя папки) или --folder-id (id папки))
3. Перенести диск в нужную папку:
	yc compute disk move <disk-id> --destination-folder-id <folder-id>

===============================================
Изменение статики

Полезные ссылки: https://yandex.cloud/ru/docs/compute/operations/vm-control/internal-ip-update

Инстуркция:
1. Вывести список папок и выбрать из какой и куда переносить:
	yc resource-manager folder list
2. Вывести список вм:
	yc compute instance list (необязательно --folder-name (имя папки) или --folder-id (id папки))
3.
 yc compute instance update-network-interface --id <id машины> --network-interface-index <номер интерфейса, начинается с 0> --ipv4-address <ip адрес>

===============================================
Перенос образа вм в другую папку.

Инструкция:
Для переноса образа, не обходимо создать новый образ в нужной папке, в качестве источника указать образ который хотите перенести:

1. Выводим список папок и ищем идентификатор той в которой нужный нам образ:
	yc resource-manager folder list
2. Просматриваем список образов в нужной папке:
	yc compute image list --folder-id <id нужной нам папки>
3. Далее создаем новый образ указывая в качестве источника тот, который хотим перенести
	yc compute image create --name astra-175-conigurated-16-08-2024 --source-image-id fd83bddfv16pft6052r9 --folder-id b1g26iejv4ajlplp2bq6
		--name - имя нового образа
		--source-image-id - ид исходного образа
		--folder id - папка в которой создастся новый образ

===============================================

Создание сервисных аккаунтов

yc iam service-account create --name net5-cloud-mon --folder-id b1gt4cu2q8hsbrd015ar - создание аккаунта
yc resource-manager folder add-access-binding --service-account-id ajekbpvmlnfgtqkog6h1 --role monitoring.editor net5-vrm-sub
===============================================